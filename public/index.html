<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Selfcast Talent Presentation Generator – Prototype v1.1</title>
<style>
  :root{--bg:#0b0b0b;--fg:#f5f5f5;--muted:#b7b7b7;--accent:#e51c23;--card:#151515;--line:#222;}
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--fg);font-family:ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji"}
  a{color:inherit}
  .app{display:grid;grid-template-rows:auto 1fr;min-height:100%}
  header{display:flex;gap:16px;align-items:center;justify-content:space-between;padding:14px 18px;border-bottom:1px solid var(--line);background:linear-gradient(180deg,#0d0d0d,#0a0a0a)}
  header .brand{display:flex;align-items:center;gap:12px}
  .logo{width:28px;height:28px;border-radius:6px;background:var(--accent);display:grid;place-items:center;font-weight:800}
  .logo span{font-size:18px;color:white}
  .title{font-weight:700;letter-spacing:.3px}
  .toolbar{display:flex;gap:8px;flex-wrap:wrap}
  .btn{background:#1f1f1f;border:1px solid #2a2a2a;color:var(--fg);padding:10px 12px;border-radius:10px;cursor:pointer}
  .btn:hover{border-color:#3a3a3a}
  .btn.accent{background:var(--accent);border-color:#c0161d}
  .btn.ghost{background:transparent;border-color:#2a2a2a}
  .pane{display:grid;grid-template-columns:340px 1fr;min-height:0}
  .sidebar{border-right:1px solid var(--line);padding:14px 14px 120px;overflow:auto}
  .field{display:grid;gap:6px;margin-bottom:12px}
  label{font-size:12px;color:var(--muted)}
  input, textarea, select{background:var(--card);border:1px solid #242424;color:var(--fg);border-radius:10px;padding:10px 12px;width:100%}
  textarea{min-height:140px;resize:vertical}
  .hint{font-size:12px;color:var(--muted)}
  .chips{display:flex;flex-wrap:wrap;gap:6px;margin:6px 0 0}
  .chip{font-size:12px;border:1px solid #2a2a2a;border-radius:999px;padding:4px 8px;color:var(--muted)}
  .stage{position:relative;overflow:hidden}
  .slides{height:100%;display:grid;place-items:center}
  .slide{width:100%;height:100%;display:none}
  .slide.active{display:block}
  .deck{width:100%;height:100%;display:grid;place-items:center}
  .frame{width:min(1024px,92vw);height:min(576px,72vh);background:#0e0e0e;border:1px solid #242424;border-radius:20px;box-shadow:0 30px 60px rgba(0,0,0,.35);position:relative;overflow:hidden}
  .frame .inner{position:absolute;inset:0;padding:24px}
  .cover .title{font-size:40px;font-weight:800}
  .cover .subtitle{margin-top:8px;color:var(--muted)}
  .cover .meta{position:absolute;bottom:24px;left:24px;font-size:13px;color:var(--muted)}
  .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:12px;margin-top:8px}
  .grid .card{background:#121212;border:1px solid #222;border-radius:14px;display:grid;grid-template-rows:140px auto}
  .card img{width:100%;height:140px;object-fit:cover;border-top-left-radius:14px;border-top-right-radius:14px;background:#0b0b0b}
  .card .info{padding:10px 12px}
  .card .info .name{font-weight:700}
  .talent{display:grid;grid-template-columns:58% 42%;gap:18px;align-items:stretch}
  .hero{background:#101010;border:1px solid #222;border-radius:16px;overflow:hidden;display:grid}
  .hero img{width:100%;height:100%;object-fit:cover}
  .facts{display:grid;gap:10px}
  .facts .box{background:#101010;border:1px solid #222;border-radius:16px;padding:14px}
  .facts .kvs{display:grid;grid-template-columns:auto 1fr;gap:6px 12px}
  .facts .k{color:var(--muted)}
  .facts .links a{display:inline-block;margin-right:8px;margin-bottom:6px;background:#161616;border:1px solid #2a2a2a;border-radius:999px;padding:6px 10px;font-size:12px;text-decoration:none}
  .footer-slide{display:grid;grid-template-columns:1fr auto;gap:16px;height:100%}
  .footer-left{display:grid;align-content:center;gap:12px}
  .qr{width:140px;height:140px;background:conic-gradient(from 0deg,var(--accent),#333);border-radius:10px;display:grid;place-items:center;font-size:12px}
  .nav{position:absolute;inset:auto 16px 16px 16px;display:flex;justify-content:space-between;pointer-events:none}
  .nav .btn{pointer-events:auto}
  .toast{position:fixed;bottom:18px;left:50%;transform:translateX(-50%);background:#111;border:1px solid #2a2a2a;padding:10px 14px;border-radius:10px;color:var(--muted);display:none}
  .toast.show{display:block}
</style>
</head>
<body>
<div class="app">
  <header>
    <div class="brand">
      <div class="logo" aria-label="Selfcast logo"><span>S</span></div>
      <div>
        <div class="title">Selfcast Talent Presentation – Prototype v1.1</div>
        <div class="hint">Paste Role URL or JSON → choose filter → <b>Generate</b>. Use ← → for slides.</div>
      </div>
    </div>
    <div class="toolbar">
      <button class="btn ghost" id="btnPrev" title="Previous slide">← Prev</button>
      <button class="btn ghost" id="btnNext" title="Next slide">Next →</button>
      <button class="btn" id="btnPrint" title="Print / Save as PDF">Export PDF</button>
      <button class="btn accent" id="btnGenerate">Generate</button>
    </div>
  </header>
  <div class="pane">
    <aside class="sidebar">
      <div class="field">
        <label>Project / Deck Title</label>
        <input id="inpTitle" value="Casting Presentation – International Faces" />
      </div>
      <div class="field">
        <label>Role URL (Producer)</label>
        <input id="inpRole" value="https://producer.selfcast.com/production/6b84cd97-f7e1-4637-83b8-12c40ba8eedb/role/b95af7ac-5a69-466d-9aa4-43baec5bb7be" />
        <div class="hint">Note: Live fetch requires API—this prototype uses pasted JSON.</div>
      </div>
      <div class="field">
        <label>Paste Role JSON (sample included)</label>
        <textarea id="inpJson"></textarea>
        <div class="chips">
          <div class="chip">status</div><div class="chip">shortlisted</div>
          <div class="chip">best_image</div><div class="chip">gallery[]</div>
          <div class="chip">requested_uploads[]</div><div class="chip">profile_url</div>
        </div>
      </div>
      <div class="field">
        <label>Options</label>
        <label style="display:flex;gap:8px;align-items:center;font-size:13px;color:var(--muted)"><input type="checkbox" id="optGrid" checked/> Include grid summary</label>
        <label style="display:flex;gap:8px;align-items:center;font-size:13px;color:var(--muted)"><input type="checkbox" id="optQR" checked/> Show profile link buttons</label>
      </div>
      <div class="field">
        <label>Filter talents by status</label>
        <select id="selFilter">
          <option value="in_review" selected>IN REVIEW only</option>
          <option value="shortlisted">ALL SHORTLISTED</option>
          <option value="all">All candidates</option>
        </select>
        <div class="hint">Matches <code>status</code> (IN_REVIEW / SHORTLISTED / …) or boolean <code>shortlisted</code>.</div>
      </div>
      <div class="field">
        <button class="btn accent" id="btnGenerate2">Generate Deck</button>
      </div>
      <div class="hint">Tip: After generate, press <b>Cmd/Ctrl+P</b> → Save as PDF.</div>
    </aside>
    <main class="stage">
      <div class="slides" id="slides"></div>
      <div class="nav">
        <button class="btn ghost" id="navPrev">←</button>
        <button class="btn ghost" id="navNext">→</button>
      </div>
    </main>
  </div>
</div>
<div class="toast" id="toast"></div>
<script>
const toast=(msg)=>{const t=document.getElementById('toast');t.textContent=msg;t.classList.add('show');setTimeout(()=>t.classList.remove('show'),1800)};

// --- SAMPLE DATA ---
const sample = {
  project: "Blacklane – International Faces",
  role_url: "https://producer.selfcast.com/production/6b84cd97-f7e1-4637-83b8-12c40ba8eedb/role/b95af7ac-5a69-466d-9aa4-43baec5bb7be",
  talents: [
    {name:"Fab Leigh Fisher",location:"Stockholm, Sweden",height_cm:186,level:"Professional",tshirt:"L",status:"SHORTLISTED",shortlisted:true,profile_url:"https://selfcast.com/talent/fableigh",best_image:"https://via.placeholder.com/800x600.jpg?text=Fab+Leigh+Fisher",gallery:["https://via.placeholder.com/400x300.jpg?text=Fab+1","https://via.placeholder.com/400x300.jpg?text=Fab+2"],requested_uploads:[{label:"Selftape – Scene A",type:"video",url:"https://example.com/selftape-fab.mp4"},{label:"Requested Photo",type:"image",url:"https://via.placeholder.com/600x800.jpg?text=Requested+Photo"}]},
    {name:"Anna Sanderson",location:"Berlin, Germany",height_cm:172,level:"Middle",tshirt:"M",status:"IN_REVIEW",shortlisted:false,profile_url:"https://selfcast.com/talent/annasanderson",best_image:"https://via.placeholder.com/800x600.jpg?text=Anna+Sanderson",gallery:["https://via.placeholder.com/400x300.jpg?text=Anna+1","https://via.placeholder.com/400x300.jpg?text=Anna+2"],requested_uploads:[{label:"Selftape – Intro",type:"video",url:"https://example.com/selftape-anna.mp4"}]},
    {name:"Jamal Carter",location:"Copenhagen, Denmark",height_cm:181,level:"New",tshirt:"M",status:"APPLIED",shortlisted:false,profile_url:"https://selfcast.com/talent/jamalcarter",best_image:"https://via.placeholder.com/800x600.jpg?text=Jamal+Carter",gallery:["https://via.placeholder.com/400x300.jpg?text=Jamal+1"],requested_uploads:[]}
  ]
};

const inpJson=document.getElementById('inpJson'); inpJson.value=JSON.stringify(sample,null,2);
const slidesEl=document.getElementById('slides'); let currentIndex=0;
function clearSlides(){slidesEl.innerHTML='';}
function setActive(idx){const all=[...document.querySelectorAll('.slide')];if(!all.length)return;all.forEach((el,i)=>el.classList.toggle('active',i===idx));currentIndex=Math.max(0,Math.min(idx,all.length-1));}
function next(){setActive(currentIndex+1)} function prev(){setActive(currentIndex-1)}
function k(v){return v==null?'–':v}

function buildCover(title,count,roleUrl,filterLabel){
  const slide=document.createElement('section'); slide.className='slide';
  const roleLink=roleUrl?`<a href="${escapeAttr(roleUrl)}" target="_blank" rel="noopener">Open role ↗</a>`:'';
  slide.innerHTML=`<div class="deck"><div class="frame cover"><div class="inner">
  <div class="title">${escapeHtml(title)}</div>
  <div class="subtitle">${escapeHtml(filterLabel)} • ${count} talents</div>
  <div class="meta">${roleLink} • Generated by Selfcast • ${new Date().toLocaleDateString()}</div>
  </div></div></div>`;
  slidesEl.appendChild(slide);
}
function buildGrid(talents,roleUrl){
  const slide=document.createElement('section'); slide.className='slide';
  const cards=talents.map(t=>`<div class="card">
    <img src="${escapeAttr(t.best_image||'https://via.placeholder.com/600x400?text=Image')}" alt="${escapeAttr(t.name)}" />
    <div class="info"><div class="name">${escapeHtml(t.name)}</div><div class="hint">${escapeHtml(t.location||'')}</div></div>
  </div>`).join('');
  const more=roleUrl?`<a class="btn" href="${escapeAttr(roleUrl)}" target="_blank" rel="noopener">View all candidates ↗</a>`:'';
  slide.innerHTML=`<div class="deck"><div class="frame"><div class="inner">
    <div style="display:flex;justify-content:space-between;align-items:end;margin-bottom:8px">
      <h2 style="margin:0">Overview</h2><div>${more}</div>
    </div>
    <div class="grid">${cards}</div>
  </div></div></div>`;
  slidesEl.appendChild(slide);
}
function buildTalent(t){
  const slide=document.createElement('section'); slide.className='slide';
  const gallery=(t.gallery||[]).slice(0,3).map(u=>`<img src="${escapeAttr(u)}" alt="${escapeAttr(t.name)} gallery" style="width:100%;height:110px;object-fit:cover;border-radius:10px;border:1px solid #222"/>`).join('');
  const reqs=(t.requested_uploads||[]).map(r=>`<a href="${escapeAttr(r.url)}" target="_blank" rel="noopener">${escapeHtml(r.label||r.type||'Requested')}</a>`).join('');
  slide.innerHTML=`<div class="deck"><div class="frame"><div class="inner">
    <div class="talent">
      <div class="hero"><img src="${escapeAttr(t.best_image||'https://via.placeholder.com/800x600?text=Image')}" alt="${escapeAttr(t.name)}"/></div>
      <div class="facts">
        <div class="box"><h2 style="margin:0 0 6px 0">${escapeHtml(t.name)}</h2>
          <div class="kvs">
            <div class="k">Location</div><div>${escapeHtml(t.location||'')}</div>
            <div class="k">Height</div><div>${k(t.height_cm)} cm</div>
            <div class="k">Level</div><div>${escapeHtml(t.level||'')}</div>
            <div class="k">T-shirt</div><div>${escapeHtml(t.tshirt||'')}</div>
          </div>
        </div>
        <div class="box"><div class="hint" style="margin-bottom:6px">Requested videos & photos</div>
          <div class="links">${reqs || '<span class="hint">No requested uploads</span>'}</div>
        </div>
        <div class="box"><div class="hint" style="margin-bottom:6px">Gallery</div>
          <div style="display:grid;grid-template-columns:repeat(3,1fr);gap:8px">${gallery || '<span class="hint">No extra images</span>'}</div>
        </div>
        <div class="box"><a class="btn" style="text-decoration:none;display:inline-block" href="${escapeAttr(t.profile_url||'#')}" target="_blank" rel="noopener">Open full profile ↗</a></div>
      </div>
    </div>
  </div></div></div>`;
  slidesEl.appendChild(slide);
}
function buildFooter(){
  const slide=document.createElement('section'); slide.className='slide';
  slide.innerHTML=`<div class="deck"><div class="frame"><div class="inner footer-slide">
    <div class="footer-left">
      <h2 style="margin:0">Next steps</h2>
      <div class="hint">Shortlist your favorites and reply with selections. We can arrange callbacks and holds same-day.</div>
      <div class="hint">Questions? Contact casting@selfcast.com • +45 22 81 31 13</div>
    </div>
    <div class="qr">SELFCAST</div>
  </div></div></div>`;
  slidesEl.appendChild(slide);
}
function generate(){
  clearSlides();
  let data;
  try{ data=JSON.parse(document.getElementById('inpJson').value.trim()); }
  catch(e){ toast('Invalid JSON – using sample'); data=sample; }
  const title=document.getElementById('inpTitle').value||data.project||'Casting Presentation';
  const includeGrid=document.getElementById('optGrid').checked;
  const roleUrl=(document.getElementById('inpRole').value||data.role_url||'').trim();
  const filterMode=document.getElementById('selFilter').value;
  const talentsRaw=Array.isArray(data.talents)?data.talents:[];
  const norm=(s)=>String(s||'').toUpperCase();
  const filtered=talentsRaw.filter(t=>{
    if(filterMode==='all') return true;
    const s=norm(t.status); const sl=!!t.shortlisted;
    if(filterMode==='in_review') return s==='IN_REVIEW';
    if(filterMode==='shortlisted') return s==='SHORTLISTED'||sl===true;
    return true;
  });
  const label=filterMode==='in_review'?'IN REVIEW':filterMode==='shortlisted'?'ALL SHORTLISTED':'ALL CANDIDATES';
  buildCover(title,filtered.length,roleUrl,label);
  if(includeGrid) buildGrid(filtered,roleUrl);
  filtered.forEach(buildTalent);
  buildFooter();
  setActive(0); toast('Deck generated');
}
function exportPdf(){ window.print(); }
function escapeHtml(s){return String(s).replace(/[&<>"']/g,m=>({"&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;"}[m]))}
function escapeAttr(s){return escapeHtml(s)}
['btnGenerate','btnGenerate2'].forEach(id=>document.getElementById(id).addEventListener('click',generate));
['btnNext','navNext'].forEach(id=>document.getElementById(id).addEventListener('click',()=>setActive(currentIndex+1)));
['btnPrev','navPrev'].forEach(id=>document.getElementById(id).addEventListener('click',()=>setActive(currentIndex-1)));
document.getElementById('btnPrint').addEventListener('click',exportPdf);
document.addEventListener('keydown',e=>{if(e.key==='ArrowRight') setActive(currentIndex+1); if(e.key==='ArrowLeft') setActive(currentIndex-1);});
generate();
</script>
</body>
</html>
