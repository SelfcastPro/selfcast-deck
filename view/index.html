<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Selfcast – Presentation</title>
<style>
  :root{
    --bg:#0b0b0b; --fg:#111; --paper:#fff; --muted:#6b7280; --line:#e5e7eb; --accent:#e51c23; --green:#16a34a;
  }
  *{box-sizing:border-box}
  html,body{margin:0;padding:0;background:var(--bg);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;color:#f5f5f5}
  .max{max-width:1100px;margin:0 auto;padding:24px}
  .sheet{background:var(--paper);color:var(--fg);border-radius:18px;padding:28px}
  .pad>*+*{margin-top:14px}

  .bar{display:flex;justify-content:flex-end;align-items:center;margin-bottom:12px}
  .btn{display:inline-flex;align-items:center;gap:8px;background:var(--accent);border:none;color:#fff;
       padding:10px 14px;border-radius:12px;cursor:pointer;font-weight:700}
  .no-print{display:inline-flex}

  .proj-title{font-size:34px;font-weight:900}
  .brand{display:flex;align-items:center;gap:12px}
  .wordmark{letter-spacing:.18em;font-weight:900;font-size:20px;text-align:right}
  .subtitle{color:#6b7280;font-size:13px;font-weight:700;letter-spacing:.06em;text-align:right}

  .rolegrid{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:16px}
  .rolecard{border:1px solid var(--line);border-radius:16px;background:#fff;overflow:hidden}
  .imgwrap{position:relative}
  .imgwrap img{display:block;width:100%;height:220px;object-fit:cover;object-position:top}
  .rolecta{position:absolute;right:8px;bottom:8px;background:var(--accent);color:#fff;text-decoration:none;
           font-weight:800;border:none;border-radius:10px;padding:6px 10px;font-size:12px}
  .cap{padding:10px 12px;font-weight:800}

  .how{background:#ffe8ea;border:1px solid var(--accent);border-radius:14px;padding:12px}
  .how h2{margin:0 0 6px;font-size:18px}
  .how p{margin:6px 0;font-size:14px;line-height:1.45}
  .green{color:#16a34a;font-weight:700}

  @media print{
    @page{size:A4;margin:12mm}
    html,body{background:#fff}
    .sheet{border:none;border-radius:0;padding:0}
    .max{max-width:794px;margin:0 auto;padding:0}
    .no-print{display:none !important}
  }
</style>
</head>
<body>
  <div class="max">
    <div class="bar no-print">
      <button class="btn" id="btn-print">Download PDF</button>
    </div>
    <div id="app"></div>
  </div>

<script>
(function(){
  const qs = (p)=> new URLSearchParams(location.search).get(p)||"";
  const esc = (s)=> (s||"").replace(/[&<>"']/g,m=>({ "&":"&amp;","<":"&lt;",">":"&gt;","\"":"&quot;","'":"&#39;" }[m]));
  function unpack(s){ const json = decodeURIComponent(escape(atob(s))); return JSON.parse(json); }

  document.getElementById('btn-print').addEventListener('click', ()=> window.print());

  let data;
  try{
    const d = qs('d'); if(!d) throw new Error();
    data = unpack(d);
  }catch{
    document.getElementById('app').innerHTML =
      '<section class="sheet"><div class="pad"><h1>Invalid link</h1><p>The share link is missing or broken.</p></div></section>';
    return;
  }

  const { projectName, brand, contact, roles, showHow } = data;

  const cover = `
    <section class="sheet"><div class="pad">
      <div style="display:flex;justify-content:space-between;align-items:flex-start;">
        <div><div class="proj-title">${esc(projectName||"")}</div></div>
        <div class="brand">
          <div style="text-align:right">
            ${brand?.showWordmark!==false ? `<div class="wordmark">${esc(brand?.wordmark||"SELFCAST")}</div>
            <div class="subtitle">${esc(brand?.subtitle||"CASTING MADE EASY")}</div>`:''}
          </div>
          ${brand?.logoUrl ? `<img src="${esc(brand.logoUrl)}" alt="Logo" style="height:40px;border-radius:8px;border:1px solid #eee">` : ``}
        </div>
      </div>
    </div></section>
  `;

  const how = showHow===false ? '' : `
    <section class="sheet"><div class="pad">
      <div class="how">
        <h2>THIS IS HOW IT WORKS!</h2>
        <p><strong>Decline</strong><br>Click <em>Decline</em> to notify the Talent they’re not selected. They disappear from your list.</p>
        <p><strong><span class="green">Requested videos/photos</span></strong><br>See new videos or photos uploaded by the Talent for this job.</p>
        <p><strong>Talent picture</strong><br>Click a Talent’s picture to open their full profile.</p>
        <p><strong>Add to Shortlist</strong><br>Move Talents forward in the process, or book a Talent directly.</p>
        <div style="margin-top:10px;border-top:1px dashed var(--accent);padding-top:8px;color:#111">
          <div style="font-size:13px">If you need assistance:</div>
          <div style="color:#6b7280">${esc(contact?.person||"Selfcast")}${contact?.email?` · ${esc(contact.email)}`:""}${contact?.phone?` · ${esc(contact.phone)}`:""}</div>
        </div>
      </div>
    </div></section>
  `;

  const grid = `
    <section class="sheet"><div class="pad">
      <div class="rolegrid">
        ${(roles||[]).map(r=>`
          <div class="rolecard">
            <div class="imgwrap">
              ${r.hero ? `<img src="${esc(r.hero)}" alt="${esc(r.title)}">` : `<div style="height:220px;background:#f4f4f5"></div>`}
              ${r.roleUrl ? `<a class="rolecta" href="${esc(r.roleUrl)}" target="_blank" rel="noreferrer">Open role</a>` : ``}
            </div>
            <div class="cap">${esc(r.title||"")}</div>
          </div>
        `).join('')}
      </div>
    </div></section>
  `;

  document.getElementById('app').innerHTML = cover + how + grid;
})();
</script>
</body>
</html>
