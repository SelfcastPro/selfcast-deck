<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Selfcast â€“ Login</title>
<style>
  :root{--bg:#0b0b0b;--fg:#f5f5f5;--accent:#e51c23}
  html,body{height:100%;margin:0;background:var(--bg);color:var(--fg);font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial}
  .wrap{height:100%;display:grid;place-items:center}
  .box{width:100%;max-width:360px;background:#121212;border:1px solid #222;border-radius:16px;padding:22px}
  h1{margin:0 0 16px;font-size:20px}
  input{width:100%;padding:12px;border-radius:10px;border:1px solid #2a2a2a;background:#0f0f0f;color:#fff}
  .btn{margin-top:12px;width:100%;display:inline-block;background:var(--accent);border:none;color:#fff;padding:12px;border-radius:12px;font-weight:700;cursor:pointer}
  .muted{color:#aaa;font-size:12px;margin-top:10px;text-align:center}
</style>
</head>
<body>
  <div class="wrap">
    <div class="box">
      <h1>Team login</h1>
      <form id="f">
        <input id="pw" type="password" placeholder="Team password" autofocus/>
        <button class="btn" type="submit">Continue</button>
      </form>
      <div class="muted">Need access? Ask an admin for the password.</div>
    </div>
  </div>
<script>
document.getElementById('f').addEventListener('submit', async (e)=>{
  e.preventDefault();
  const password = document.getElementById('pw').value.trim();
  const r = await fetch('/api/login', { method:'POST', headers:{'Content-Type':'application/json'}, body:JSON.stringify({password}) });
  const j = await r.json();
  if(j.ok){
    const next = new URLSearchParams(location.search).get('next') || '/';
    location.href = next;
  }else{
    alert(j.error || 'Login failed');
  }
});
</script>
</body>
</html>
